# Sprite Sheet Tool - Cocos Creator 扩展

一个功能强大的 Cocos Creator 扩展，用于合图打包、拆包和图片拆分功能。

## 功能特性

- ✅ **合图打包**：将多个图片打包成一张合图，支持简单排列和最优打包算法
- ✅ **合图拆包**：从合图中提取单个子图，支持 JSON 和 PLIST 格式配置文件
- ✅ **图片拆分**：将一张图片按行列拆分成多个子图
- ✅ **Cocos Creator 集成**：直接保存到 Cocos Creator 项目，自动刷新资源数据库
- ✅ **实时预览**：实时预览合图和拆分结果
- ✅ **错误处理**：完善的错误处理和用户提示
- ✅ **日志记录**：详细的日志记录，便于调试

## 安装指南

### 方法一：从扩展目录安装

1. 将扩展目录复制到 Cocos Creator 项目的 `extensions` 目录下
2. 重启 Cocos Creator
3. 在菜单栏中找到 `扩展` -> `Sprite Sheet Tool` -> `打开面板`

### 方法二：从源码构建

1. 克隆或下载扩展源码
2. 在扩展目录下运行：
   ```bash
   npm install
   npm run build
   ```
3. 将扩展目录复制到 Cocos Creator 项目的 `extensions` 目录下
4. 重启 Cocos Creator

## 使用说明

### 合图打包

1. 打开扩展面板，选择 `打包` 标签页
2. 点击 `上传图片` 按钮，选择要打包的图片
3. 配置打包选项：
   - **算法**：选择打包算法（简单排列 或 最优打包）
   - **最大尺寸**：设置合图的最大尺寸
   - **间距**：设置子图之间的间距
   - **填充**：设置子图周围的填充
   - **2 的幂次**：是否将合图尺寸调整为 2 的幂次
   - **允许旋转**：是否允许旋转子图以优化空间
   - **正方形**：是否强制合图为正方形
4. 点击 `生成合图` 按钮
5. 预览合图结果
6. 点击 `保存到项目` 按钮，将合图和配置文件保存到项目

### 合图拆包

1. 打开扩展面板，选择 `拆包` 标签页
2. 上传合图图片
3. 上传配置文件（JSON 或 PLIST 格式）
4. 点击 `拆分` 按钮
5. 预览拆分结果
6. 点击 `保存到项目` 按钮，将子图保存到项目

### 图片拆分

1. 打开扩展面板，选择 `拆分` 标签页
2. 上传要拆分的图片
3. 设置行列数：
   - **默认行数**：设置拆分的行数
   - **默认列数**：设置拆分的列数
   - **替换原图**：是否替换原图
4. 点击 `使用参数分割当前图片` 按钮
5. 预览拆分结果
6. 点击 `保存到项目` 按钮，将子图保存到项目

## 配置文件格式

### JSON 格式

```json
{
  "image": "sprite.png",
  "format": "RGBA8888",
  "size": {
    "w": 1024,
    "h": 1024
  },
  "scale": 1,
  "frames": [
    {
      "name": "sprite1.png",
      "x": 0,
      "y": 0,
      "width": 100,
      "height": 100,
      "rotated": false
    }
  ],
  "meta": {
    "app": "SpriteSheetTool",
    "version": "1.0.0",
    "format": "RGBA8888",
    "size": {
      "w": 1024,
      "h": 1024
    }
  }
}
```

### PLIST 格式

PLIST 格式是 Cocos2d-x 常用的格式，扩展支持解析 PLIST 格式的配置文件。

## 常见问题

### Q: 扩展无法打开面板？

A: 请确保：
1. 扩展已正确安装到 `extensions` 目录
2. 已运行 `npm install` 和 `npm run build`
3. 已重启 Cocos Creator

### Q: 保存文件失败？

A: 请确保：
1. 项目路径正确
2. 有写入权限
3. 目录路径存在

### Q: 配置文件解析失败？

A: 请确保：
1. 配置文件格式正确
2. 配置文件包含必要的字段（frames、size 等）
3. 配置文件编码为 UTF-8

### Q: 图片处理失败？

A: 请确保：
1. 图片格式支持（PNG、JPG 等）
2. 图片大小合理
3. 图片数据完整

## 故障排除

### 检查扩展日志

1. 打开 Cocos Creator 开发者工具（菜单栏 -> `开发者` -> `开发者工具`）
2. 查看控制台日志
3. 查找错误信息

### 检查扩展配置

1. 检查 `package.json` 配置
2. 检查 `tsconfig.json` 配置
3. 检查构建输出

### 重新安装扩展

1. 删除扩展目录
2. 重新复制扩展目录
3. 运行 `npm install` 和 `npm run build`
4. 重启 Cocos Creator

## 技术支持

如有问题，请查看：
- [Cocos Creator 扩展开发文档](https://docs.cocos.com/creator/3.8/manual/zh/editor/extension/)
- [Cocos Creator 论坛](https://forum.cocos.org/)

## 许可证

MIT License

## 更新日志

### v1.0.0 (2025-11-13)

- ✅ 初始版本发布
- ✅ 合图打包功能
- ✅ 合图拆包功能
- ✅ 图片拆分功能
- ✅ Cocos Creator 集成
- ✅ 错误处理和日志
